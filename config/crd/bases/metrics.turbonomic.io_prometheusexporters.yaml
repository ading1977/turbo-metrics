---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.8.0
  creationTimestamp: null
  name: prometheusexporters.metrics.turbonomic.io
spec:
  group: metrics.turbonomic.io
  names:
    kind: PrometheusExporter
    listKind: PrometheusExporterList
    plural: prometheusexporters
    singular: prometheusexporter
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: PrometheusExporter is the Schema for the prometheusexporters
          API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: PrometheusExporterSpec defines the desired state of PrometheusExporter
            properties:
              entities:
                description: EntityConfigs specifies how entities can be constructed
                  from metrics exposed by this type of prometheus exporter
                items:
                  properties:
                    attributes:
                      description: AttributeConfigs specifies how to map labels into
                        attributes of an entity
                      items:
                        properties:
                          as:
                            description: As specifies how to reconstruct the extracted
                              patterns from the result of the Matches and use that
                              as the attribute value instead This field is only evaluated
                              when Matches field is specified
                            type: string
                          isIdentifier:
                            description: IsIdentifier specifies if this attribute
                              should be used as the identifier of an entity There
                              should be one and only one identifier for an entity
                            type: boolean
                          label:
                            description: The name of the label If the Matches field
                              is not specified, the value of this label will be used
                              as the attribute value
                            type: string
                          matches:
                            description: Matches specifies the regular expression
                              to extract the pattern from the label value and then
                              use it as the attribute value
                            type: string
                          name:
                            description: The name of the attribute
                            type: string
                        required:
                        - label
                        - name
                        type: object
                      minItems: 1
                      type: array
                      x-kubernetes-list-map-keys:
                      - name
                      x-kubernetes-list-type: map
                    hostedOnVM:
                      description: HostedOnVM specifies if an entity is hosted on
                        VM If not set, the entity is assumed to be hosted on a container
                      type: boolean
                    metrics:
                      items:
                        properties:
                          queries:
                            items:
                              properties:
                                promql:
                                  description: PromQL specifies the Prometheus query
                                  type: string
                                type:
                                  description: Type specifies the subtype of metric
                                  enum:
                                  - used
                                  - capacity
                                  - peak
                                  type: string
                              required:
                              - promql
                              - type
                              type: object
                            minItems: 1
                            type: array
                            x-kubernetes-list-map-keys:
                            - type
                            x-kubernetes-list-type: map
                          type:
                            description: Type specifies the type of metric
                            enum:
                            - responseTime
                            - transaction
                            - heap
                            - collectionTime
                            - cacheHitRate
                            - dbMem
                            - cpu
                            - memory
                            type: string
                        required:
                        - queries
                        - type
                        type: object
                      type: array
                    type:
                      description: Type specifies the type of entity
                      enum:
                      - application
                      - databaseServer
                      - virtualMachine
                      type: string
                  required:
                  - attributes
                  - metrics
                  - type
                  type: object
                minItems: 1
                type: array
            required:
            - entities
            type: object
          status:
            description: PrometheusExporterStatus defines the observed state of PrometheusExporter
            properties:
              message:
                type: string
              reason:
                type: string
              state:
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
